<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 砖拽</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap');
        body { font-family: 'Assistant', sans-serif; background-color: #fdf2f8; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="h-[100dvh] box-border overflow-x-hidden overflow-y-hidden flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-xl bg-white rounded-3xl shadow-xl overflow-hidden border border-pink-100">
        
        <div id="login-screen" class="p-8 text-center space-y-6 fade-in">
            <div class="text-6xl"></div>
            <h1 class="text-3xl font-bold text-amber-900"> 砖拽</h1>
            <p class="text-gray-600 font-medium">! 转砖转 砖 砖 砖专转 住</p>
            <div class="space-y-4">
                <input type="text" id="student-name" class="w-full p-4 border-2 border-pink-100 rounded-2xl text-center focus:border-pink-400 outline-none transition-all" placeholder=" 拽专 ?">
            </div>
            <button onclick="startQuiz()" class="w-full bg-pink-500 text-white py-4 rounded-2xl font-bold hover:bg-pink-600 transition-all shadow-md active:scale-95">拽! </button>
        </div>

        <div id="quiz-container" class="hidden p-8 fade-in">
            <div class="flex justify-between items-center mb-6 text-sm font-bold text-pink-400">
                <span id="progress-text"></span>
                <span id="score-text"></span>
            </div>
            
            <h2 id="question-text" class="text-xl font-bold text-gray-800 mb-6 min-h-[3rem]"></h2>
            <div id="options-list" class="space-y-3"></div>

            <div id="hint-box" class="mt-4 hidden">
                <div class="bg-amber-50 border-r-4 border-amber-400 p-3 rounded-l-lg text-sm italic text-amber-800">
                     <strong>专:</strong> <span id="hint-content"></span>
                </div>
            </div>

            <div id="feedback" class="mt-6 hidden p-4 rounded-2xl border-2 text-center fade-in">
                <p id="feedback-msg" class="font-bold text-lg mb-1"></p>
                <p id="feedback-desc" class="text-gray-600 text-sm mb-4"></p>
                <button id="next-btn" class="w-full bg-gray-800 text-white py-3 rounded-xl font-bold">砖 </button>
            </div>

            <div id="hint-toggle" class="mt-4 text-center">
                <button onclick="toggleHint()" class="text-pink-500 text-sm font-bold hover:underline">专爪 专? か</button>
            </div>
        </div>

     <div id="open-question-screen" class="hidden p-8 text-center fade-in">
    <div class="text-5xl mb-4">锔</div>
    
    <h2 class="text-xl font-bold text-gray-800 mb-3">
        转 砖转, 专注转  专 专
    </h2>

    <textarea 
        id="comment-box" 
        class="w-full p-4 border-2 border-pink-100 rounded-2xl focus:border-pink-400 outline-none transition-all mb-6"
        placeholder=" 砖转  注 砖专转 住">
    </textarea>

    <button onclick="finishApp()" 
        class="w-full bg-pink-500 text-white py-4 rounded-2xl font-bold hover:bg-pink-600 shadow-md">
        住转!
    </button>
</div>

        <div id="finish-screen" class="hidden p-10 text-center fade-in">
            <div class="text-7xl mb-6"></div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">!Hooray</h2>
            <p id="final-stats" class="text-gray-600 mb-8"></p>
            <button onclick="location.reload()" class="bg-gray-100 text-gray-800 px-8 py-3 rounded-xl font-bold">专 转</button>
        </div>
    </div>

    <script>
        // 转转 注转:
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwWshLDdfpdgiabtWweK9tzN64O40uKNR0bR1NTnH40WHRuQSgWRxyhr4qoKdWWxWS5/exec';
        
        let userName = "";
        let currentIdx = 0;
        let score = 0;

        const questions = [
            { q: " 爪 驻拽 砖拽?", options: ["拽拽", "拽驻", ""], correct: "拽拽", hint: "砖 注 砖  '转专'.", desc: "驻 拽拽  转 转专 注 注爪 拽拽." },
            { q: " 住 砖拽  转 砖 砖拽 ( 转)?", options: ["专专", "", ""], correct: "", hint: "   注住转 拽拽, 专拽 转 拽拽.", desc: "砖拽  注砖 转 拽拽, 住专 爪拽 ." },
            { q: "  注 爪专转 砖拽  转专 注?", options: ["专\"", "砖抓", "砖专"], correct: "砖抓", hint: " 注 专 专 砖注.", desc: "砖爪专 爪注  -9 拽 砖拽 砖!" },
            { q: "  拽拽  拽 砖拽 专专 转?", options: ["30%", "60%", "10%"], correct: "60%", hint: " 转专 爪.", desc: " 砖砖 转专 拽拽, 砖拽 驻转 转拽 转专 专." },
            { q: "驻 爪 砖拽  专砖?", options: ["", "砖抓", "爪专驻转"], correct: "砖抓", hint: " 驻专 专 住 注砖 转 .", desc: " 拽专 砖转 1875 注专转 拽转 ." },
            { q: " 注 注转拽 砖砖转砖 驻 拽拽 住祝?", options: ["专", "爪拽 ", "爪专"], correct: "爪拽 ", hint: "  专 专拽.", desc: " 注专 转 拽拽   砖砖转砖  住专 驻." },
            { q: " 拽专 砖拽 砖 (住 专注) 砖转 专?", options: ["砖拽 专 (专)", "砖拽 ", "砖拽 "], correct: "砖拽 专 (专)", hint: " 爪注 砖  .", desc: "砖拽 专 砖拽 -2017  专 驻 注." },
            { q: " 驻专专 砖 砖拽 住?", options: ["70 注转", "34 注转", "15 注转"], correct: "34 注转", hint: "拽专  驻专专转 祝 砖.", desc: " 住 砖砖拽 住 驻 爪专   注." },
            { q: " 住驻 砖拽  砖  专拽 拽 专拽?", options: ["砖 转", "转 拽拽", "拽"], correct: "转 拽拽", hint: " 砖 砖 驻专.", desc: "转 '' 注专 注专  专拽 砖." },
            { q: " 专 转 砖拽 专专 转 注 专 砖?", options: ["住专", "注住转 拽拽", ""], correct: "注住转 拽拽", hint: "专 专 砖 砖专转 驻.", desc: " 砖砖 驻转 住专 转专 注住, 专专转 注." }
        ];

        function startQuiz() {
            userName = document.getElementById('student-name').value.trim();
            if (!userName) { alert("  砖  转"); return; }
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const data = questions[currentIdx];
            document.getElementById('progress-text').innerText = `砖 ${currentIdx + 1} 转 ${questions.length}`;
            document.getElementById('score-text').innerText = `拽: ${score}`;
            document.getElementById('question-text').innerText = data.q;
            document.getElementById('hint-content').innerText = data.hint;
            document.getElementById('hint-box').classList.add('hidden');
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('hint-toggle').classList.remove('hidden');
            
            const list = document.getElementById('options-list');
            list.innerHTML = "";
            data.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "w-full p-4 border-2 border-gray-100 rounded-2xl text-right hover:bg-pink-50 transition-all font-medium opt-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, data.correct, data.desc);
                list.appendChild(btn);
            });
        }

        function toggleHint() { document.getElementById('hint-box').classList.toggle('hidden'); }

        function checkAnswer(selected, correct, desc) {
            const isCorrect = (selected === correct);
            if (isCorrect) score++;

            document.querySelectorAll('.opt-btn').forEach(b => {
                b.disabled = true;
                if (b.innerText === correct) b.classList.add('bg-green-100', 'border-green-500');
                else if (b.innerText === selected && !isCorrect) b.classList.add('bg-red-100', 'border-red-500');
            });

            const fb = document.getElementById('feedback');
            fb.classList.remove('hidden');
            document.getElementById('hint-toggle').classList.add('hidden');
            fb.className = `mt-6 p-4 rounded-2xl border-2 text-center fade-in ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`;
            document.getElementById('feedback-msg').innerText = isCorrect ? " ! " : " ... ";
            document.getElementById('feedback-desc').innerText = desc;

            // 拽 砖砖 转 转砖  砖
            sendToGoogle(questions[currentIdx].q, selected, isCorrect);
        }

        document.getElementById('next-btn').onclick = () => {
            currentIdx++;
            if (currentIdx < questions.length) {
                renderQuestion();
            } else {
                document.getElementById('quiz-container').classList.add('hidden');
                document.getElementById('open-question-screen').classList.remove('hidden');
            }
        };

        function finishApp() {
            const comment = document.getElementById('comment-box').value;
            if(comment) {
                sendToGoogle("注专转 住", comment, "N/A");
            }
            document.getElementById('open-question-screen').classList.add('hidden');
            document.getElementById('finish-screen').classList.remove('hidden');
            document.getElementById('final-stats').innerText = `${userName}, 住转 注 ${score} 转砖转 转!`;
        }

        // --- 驻拽爪转 砖 ---
        function sendToGoogle(q, ans, status) {
            const data = {
                studentName: userName,
                question: q,
                answer: ans,
                isCorrect: status
            };

            fetch(SCRIPT_URL, {
                method: "POST",
                mode: "no-cors", // 砖 砖 Google Apps Script
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            }).then(() => console.log("Data sent!")).catch(e => console.error("Error", e));
        }
    </script>
</body>

</html>


