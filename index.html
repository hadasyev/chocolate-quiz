<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×—×™×“×•×Ÿ ×”×©×•×§×•×œ×“</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap');
        body { font-family: 'Assistant', sans-serif; background-color: #fdf2f8; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="h-[100dvh] box-border overflow-x-hidden overflow-y-hidden flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-xl bg-white rounded-3xl shadow-xl overflow-hidden border border-pink-100">
        
        <div id="login-screen" class="p-8 text-center space-y-6 fade-in">
            <div class="text-6xl">ğŸ«</div>
            <h1 class="text-3xl font-bold text-amber-900">×—×™×“×•×Ÿ ×”×©×•×§×•×œ×“</h1>
            <p class="text-gray-600 font-medium">×”×™×™! ×”×ª×©×•×‘×•×ª ×©×œ×š ×™×™×©×œ×—×• ×™×©×™×¨×•×ª ×œ×”×“×¡</p>
            <div class="space-y-4">
                <input type="text" id="student-name" class="w-full p-4 border-2 border-pink-100 rounded-2xl text-center focus:border-pink-400 outline-none transition-all" placeholder="××™×š ×§×•×¨××™× ×œ×š?">
            </div>
            <button onclick="startQuiz()" class="w-full bg-pink-500 text-white py-4 rounded-2xl font-bold hover:bg-pink-600 transition-all shadow-md active:scale-95">×§×“×™××”! ğŸš€</button>
        </div>

        <div id="quiz-container" class="hidden p-8 fade-in">
            <div class="flex justify-between items-center mb-6 text-sm font-bold text-pink-400">
                <span id="progress-text"></span>
                <span id="score-text"></span>
            </div>
            
            <h2 id="question-text" class="text-xl font-bold text-gray-800 mb-6 min-h-[3rem]"></h2>
            <div id="options-list" class="space-y-3"></div>

            <div id="hint-box" class="mt-4 hidden">
                <div class="bg-amber-50 border-r-4 border-amber-400 p-3 rounded-l-lg text-sm italic text-amber-800">
                    ğŸ’¡ <strong>×¨××–:</strong> <span id="hint-content"></span>
                </div>
            </div>

            <div id="feedback" class="mt-6 hidden p-4 rounded-2xl border-2 text-center fade-in">
                <p id="feedback-msg" class="font-bold text-lg mb-1"></p>
                <p id="feedback-desc" class="text-gray-600 text-sm mb-4"></p>
                <button id="next-btn" class="w-full bg-gray-800 text-white py-3 rounded-xl font-bold">×œ×©××œ×” ×”×‘××”</button>
            </div>

            <div id="hint-toggle" class="mt-4 text-center">
                <button onclick="toggleHint()" class="text-pink-500 text-sm font-bold hover:underline">×¨×•×¦×” ×¨××–? ğŸ¤«</button>
            </div>
        </div>

     <div id="open-question-screen" class="hidden p-8 text-center fade-in">
    <div class="text-5xl mb-4">âœï¸</div>
    
    <h2 class="text-xl font-bold text-gray-800 mb-3">
×ª×™×‘×” ×œ××—×©×‘×•×ª, ×¨×¢×™×•× ×•×ª ×•×›×œ ×“×‘×¨ ××—×¨ âœ¨
    </h2>

  <textarea 
  id="comment-box"
  class="w-full p-4 border-2 border-pink-100 rounded-2xl focus:border-pink-400 outline-none transition-all mb-6 min-h-[120px]"
  placeholder="××” ×©×›×•×ª×‘×™× ×›××Ÿ ×™×’×™×¢ ×™×©×™×¨×•×ª ×œ×”×“×¡"></textarea>

    <button onclick="finishApp()" 
        class="w-full bg-pink-500 text-white py-4 rounded-2xl font-bold hover:bg-pink-600 shadow-md">
        ×¡×™×™××ª×™!
    </button>
</div>

        <div id="finish-screen" class="hidden p-10 text-center fade-in">
            <div class="text-7xl mb-6">ğŸ‰</div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">!Hooray</h2>
            <p id="final-stats" class="text-gray-600 mb-8"></p>
            <button onclick="location.reload()" class="bg-gray-100 text-gray-800 px-8 py-3 rounded-xl font-bold">×—×–×¨×” ×œ×”×ª×—×œ×”</button>
        </div>
    </div>

    <script>
        // ×”×›×ª×•×‘×ª ×”××¢×•×“×›× ×ª:
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwWshLDdfpdgiabtWweK9tzN64O40uKNR0bR1NTnH40WHRuQSgWRxyhr4qoKdWWxWS5/exec';
        
        let userName = "";
        let currentIdx = 0;
        let score = 0;

        const questions = [
            { q: "×××™×–×” ×¦××— ××¤×™×§×™× ×©×•×§×•×œ×“?", options: ["×§×§××•", "×§×¤×”", "×•× ×™×œ"], correct: "×§×§××•", hint: "×”×©× ×”××“×¢×™ ×©×œ×• ×”×•× '×ª××•×‘×¨×•××”'.", desc: "×¤×•×œ×™ ×”×§×§××• ×’×“×œ×™× ×‘×ª×•×š ×ª×¨××™×œ×™× ×¢×œ ×¢×¦×™ ×§×§××•." },
            { q: "××™×–×” ×¡×•×’ ×©×•×§×•×œ×“ ×œ× ×‘×××ª × ×—×©×‘ ×œ×©×•×§×•×œ×“ (××‘×—×™× ×” ×˜×›× ×™×ª)?", options: ["××¨×™×¨", "×—×œ×‘", "×œ×‘×Ÿ"], correct: "×œ×‘×Ÿ", hint: "×”×•× ×œ× ××›×™×œ ×¢×™×¡×ª ×§×§××•, ×¨×§ ×—×××ª ×§×§××•.", desc: "×©×•×§×•×œ×“ ×œ×‘×Ÿ ×¢×©×•×™ ××—×××ª ×§×§××•, ×¡×•×›×¨ ×•××•×¦×§×™ ×—×œ×‘." },
            { q: "××™×–×• ××“×™× ×” ×™×“×•×¢×” ×›×¦×¨×™×›×ª ×”×©×•×§×•×œ×“ ×”×’×‘×•×”×” ×‘×™×•×ª×¨ ×‘×¢×•×œ×?", options: ["××¨×”\"×‘", "×©×•×•×™×¥", "×™×©×¨××œ"], correct: "×©×•×•×™×¥", hint: "××“×™× ×” ×¢× ×”×¨×‘×” ×”×¨×™× ×•×©×¢×•× ×™×.", desc: "×”×©×•×•×™×¦×¨×™ ×”×××•×¦×¢ ××•×›×œ ×›-9 ×§×™×œ×• ×©×•×§×•×œ×“ ×‘×©× ×”!" },
            { q: "××”×• ××—×•×– ×”×§×§××• ×”××™× ×™××œ×™ ×”××§×•×‘×œ ×‘×©×•×§×•×œ×“ ××¨×™×¨ ××™×›×•×ª×™?", options: ["30%", "60%", "10%"], correct: "60%", hint: "×–×” ×™×•×ª×¨ ××—×¦×™.", desc: "×›×›×œ ×©×™×© ×™×•×ª×¨ ×§×§××•, ×”×©×•×§×•×œ×“ ×¤×—×•×ª ××ª×•×§ ×•×™×•×ª×¨ ×‘×¨×™×." },
            { q: "××™×¤×” ×”×•××¦× ×©×•×§×•×œ×“ ×”×—×œ×‘ ×”×¨××©×•×Ÿ?", options: ["×‘×œ×’×™×”", "×©×•×•×™×¥", "×¦×¨×¤×ª"], correct: "×©×•×•×™×¥", hint: "×“× ×™××œ ×¤×˜×¨ ×•×”× ×¨×™ × ×¡×˜×œ×” ×¢×©×• ×–××ª ×™×—×“.", desc: "×–×” ×§×¨×” ×‘×©× ×ª 1875 ×‘×¢×–×¨×ª ××‘×§×ª ×—×œ×‘." },
            { q: "××™×”× ×”×¢××™× ×”×¢×ª×™×§×™× ×©×”×©×ª××©×• ×‘×¤×•×œ×™ ×§×§××• ×›×›×¡×£?", options: ["×”×¨×•×××™×", "×”××¦×˜×§×™× ×•×”×××™×”", "×”××¦×¨×™×"], correct: "×”××¦×˜×§×™× ×•×”×××™×”", hint: "×”× ×—×™×• ×‘××¨×›×– ×××¨×™×§×”.", desc: "×”× ×”×¢×¨×™×›×• ××ª ×”×§×§××• ×›×œ ×›×š ×©×”×©×ª××©×• ×‘×• ×œ×¡×—×¨ ×—×œ×™×¤×™×Ÿ." },
            { q: "××™×š × ×§×¨× ×”×©×•×§×•×œ×“ ×”×—×“×© (×”×¡×•×’ ×”×¨×‘×™×¢×™) ×©×”×ª×’×œ×” ×œ××—×¨×•× ×”?", options: ["×©×•×§×•×œ×“ ×¨×•×‘×™ (×•×¨×•×“)", "×©×•×§×•×œ×“ ×–×”×‘", "×©×•×§×•×œ×“ ××œ×•×—"], correct: "×©×•×§×•×œ×“ ×¨×•×‘×™ (×•×¨×•×“)", hint: "×”×•× ×‘×¦×‘×¢ ×©×œ ××‘×Ÿ ×—×Ÿ.", desc: "×©×•×§×•×œ×“ ×¨×•×‘×™ ×”×•×©×§ ×‘-2017 ×•×”×•× ×•×¨×•×“ ×‘××•×¤×Ÿ ×˜×‘×¢×™." },
            { q: "××”×™ ×”×˜××¤×¨×˜×•×¨×” ×©×‘×” ×©×•×§×•×œ×“ × ××¡?", options: ["70 ××¢×œ×•×ª", "34 ××¢×œ×•×ª", "15 ××¢×œ×•×ª"], correct: "34 ××¢×œ×•×ª", hint: "×§×¨×•×‘ ×××•×“ ×œ×˜××¤×¨×˜×•×¨×ª ×”×’×•×£ ×©×œ× ×•.", desc: "×–×• ×”×¡×™×‘×” ×©×©×•×§×•×œ×“ × ××¡ ×‘×¤×” ×‘×¦×•×¨×” ×›×œ ×›×š × ×¢×™××”." },
            { q: "××” ××•×¡×™×¤×™× ×œ×©×•×§×•×œ×“ ×›×“×™ ×©×™×”×™×” ×œ×• ××¨×§× ×—×œ×§ ×•××‘×¨×™×§?", options: ["×©××Ÿ ×–×™×ª", "×—×××ª ×§×§××•", "×§××—"], correct: "×—×××ª ×§×§××•", hint: "×–×” ×”×©×•××Ÿ ×©×œ ×”×¤×¨×™.", desc: "×ª×”×œ×™×š ×”'××™×–×•×’' ×¢×•×–×¨ ×œ×¢×¨×‘×‘ ×”×›×œ ×œ××¨×§× ××•×©×œ×." },
            { q: "××™×–×” ××¨×›×™×‘ × ×•×ª×Ÿ ×œ×©×•×§×•×œ×“ ××¨×™×¨ ××ª ×”×˜×¢× ×”××¨ ×©×œ×•?", options: ["×¡×•×›×¨", "×¢×™×¡×ª ×§×§××•", "××œ×—"], correct: "×¢×™×¡×ª ×§×§××•", hint: "×”××¨×›×™×‘ ×”××¨×›×–×™ ×©×‘× ×™×©×™×¨×•×ª ××”×¤×•×œ.", desc: "×›×›×œ ×©×™×© ×¤×—×•×ª ×¡×•×›×¨ ×•×™×•×ª×¨ ×¢×™×¡×”, ×”××¨×™×¨×•×ª ×¢×•×œ×”." }
        ];

        function startQuiz() {
            userName = document.getElementById('student-name').value.trim();
            if (!userName) { alert("× × ×œ×”×–×™×Ÿ ×©× ×›×“×™ ×œ×”×ª×—×™×œ"); return; }
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const data = questions[currentIdx];
            document.getElementById('progress-text').innerText = `×©××œ×” ${currentIdx + 1} ××ª×•×š ${questions.length}`;
            document.getElementById('score-text').innerText = `× ×™×§×•×“: ${score}`;
            document.getElementById('question-text').innerText = data.q;
            document.getElementById('hint-content').innerText = data.hint;
            document.getElementById('hint-box').classList.add('hidden');
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('hint-toggle').classList.remove('hidden');
            
            const list = document.getElementById('options-list');
            list.innerHTML = "";
            data.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "w-full p-4 border-2 border-gray-100 rounded-2xl text-right hover:bg-pink-50 transition-all font-medium opt-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, data.correct, data.desc);
                list.appendChild(btn);
            });
        }

        function toggleHint() { document.getElementById('hint-box').classList.toggle('hidden'); }

        function checkAnswer(selected, correct, desc) {
            const isCorrect = (selected === correct);
            if (isCorrect) score++;

            document.querySelectorAll('.opt-btn').forEach(b => {
                b.disabled = true;
                if (b.innerText === correct) b.classList.add('bg-green-100', 'border-green-500');
                else if (b.innerText === selected && !isCorrect) b.classList.add('bg-red-100', 'border-red-500');
            });

            const fb = document.getElementById('feedback');
            fb.classList.remove('hidden');
            document.getElementById('hint-toggle').classList.add('hidden');
            fb.className = `mt-6 p-4 rounded-2xl border-2 text-center fade-in ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`;
            document.getElementById('feedback-msg').innerText = isCorrect ? "× ×›×•×Ÿ ×××•×“! ğŸŒŸ" : "×œ× × ×›×•×Ÿ... ğŸ«";
            document.getElementById('feedback-desc').innerText = desc;

            // ×”×—×œ×§ ×©×©×•×œ×— ××ª ×”×ª×©×•×‘×” ×œ×’×™×œ×™×•×Ÿ ×©×œ×š
            sendToGoogle(questions[currentIdx].q, selected, isCorrect);
        }

        document.getElementById('next-btn').onclick = () => {
            currentIdx++;
            if (currentIdx < questions.length) {
                renderQuestion();
            } else {
                document.getElementById('quiz-container').classList.add('hidden');
                document.getElementById('open-question-screen').classList.remove('hidden');
            }
        };

        function finishApp() {
            const comment = document.getElementById('comment-box').value;
            if(comment) {
                sendToGoogle("×”×¢×¨×•×ª ×œ×”×“×¡", comment, "N/A");
            }
            document.getElementById('open-question-screen').classList.add('hidden');
            document.getElementById('finish-screen').classList.remove('hidden');
            document.getElementById('final-stats').innerText = `${userName}, ×¡×™×™××ª ×¢× ${score} ×ª×©×•×‘×•×ª × ×›×•× ×•×ª!`;
        }

        // --- ×¤×•× ×§×¦×™×™×ª ×”×©×œ×™×—×” ---
        function sendToGoogle(q, ans, status) {
            const data = {
                studentName: userName,
                question: q,
                answer: ans,
                isCorrect: status
            };

            fetch(SCRIPT_URL, {
                method: "POST",
                mode: "no-cors", // ×—×©×•×‘ ×‘×©×‘×™×œ Google Apps Script
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            }).then(() => console.log("Data sent!")).catch(e => console.error("Error", e));
        }
    </script>
</body>

</html>


